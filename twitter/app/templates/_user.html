{% for user in users %}
<div class="user-item" data-user-id="{{ user.id }}">
    <div class="user-info">
        <a href="{{ url_for('user_profile', user_id=user.id) }}" class="username">{{ user.name }}</a>
        <span class="user-email">{{ user.mailaddress }}</span>
    </div>
    {% if current_user and current_user.id != user.id %}
    <div class="user-actions">
        {% if current_user.is_following(user) %}
            <button class="btn btn-secondary" onclick="unfollow({{ user.id }})">Unfollow</button>
        {% else %}
            <button class="btn btn-primary" onclick="follow({{ user.id }})">Follow</button>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endfor %}

{% if not users %}
<div class="empty-state">
    <p>No users.</p>
</div>
{% endif %}